<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
    <meta name="description" content="‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡∏µ‡πâ - ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡∏µ‡πâ">
    
    <!-- Security Headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡∏µ‡πâ - ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡∏µ‡πâ</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üí∞</text></svg>">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="../../manifest.json">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans Thai -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.5.0/css/responsive.bootstrap5.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../../css/main.css?v=5.0.0">
    
    <style>
        .dashboard-header {
            background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
            border-bottom: 1px solid #1e40af;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .brand-logo {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ffffff;
        }
        
        .user-avatar {
            color: #ffffff;
        }
        
        .user-info {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 0.5rem 1rem;
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
        }
        
        .mobile-nav-content {
            background: rgba(30, 58, 138, 0.95);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
        }
        
        .user-section {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .border-white-10 {
            border-color: rgba(255, 255, 255, 0.1) !important;
        }
        
        .dashboard-header .nav-link {
            color: #ffffff;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            margin: 0 0.25rem;
            transition: all 0.3s ease;
        }
        
        .dashboard-header .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.1);
            color: #ffffff;
        }
        
        .dashboard-header .nav-link.active {
            background-color: #3b82f6;
            color: #ffffff;
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(59, 130, 246, 0.3);
        }
        
        /* Prevent navigation menu from wrapping on large screens */
        .dashboard-header .nav {
            flex-wrap: nowrap;
            white-space: nowrap;
        }
        
        .dashboard-header .nav-link {
            white-space: nowrap;
            flex-shrink: 0;
        }
        
        

        
        .main-content {
            padding: 2rem;
        }
        
        /* Responsive heading styles */
        .h5-responsive {
            font-size: 1.25rem; /* Default h5 size */
        }
        
        @media (max-width: 768px) {
            .h5-responsive {
                font-size: 1.1rem; /* Smaller on tablets */
            }
        }
        
        @media (max-width: 576px) {
            .h5-responsive {
                font-size: 1rem; /* Even smaller on mobile */
            }
        }
        
        
        .stats-card {
            background-color: var(--white);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .stats-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }
        
        
        .stats-icon.primary {
            background-color: var(--primary);
        }
        
        /* Modal Backdrop Customization */
        .modal-backdrop {
            background-color: rgba(0, 0, 0, 0.3) !important; /* ‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡∏≠‡∏á backdrop */
        }
        
        /* DataTables Custom Styling */
        .dataTables_wrapper .dataTables_length,
        .dataTables_wrapper .dataTables_filter,
        .dataTables_wrapper .dataTables_info,
        .dataTables_wrapper .dataTables_processing,
        .dataTables_wrapper .dataTables_paginate {
            color: #6c757d;
            font-size: 0.875rem;
        }
        
        .dataTables_wrapper .dataTables_filter input {
            border: 1px solid #ced4da;
            border-radius: 0.375rem;
            padding: 0.375rem 0.75rem;
            font-size: 0.875rem;
        }
        
        .dataTables_wrapper .dataTables_length select {
            border: 1px solid #ced4da;
            border-radius: 0.375rem;
            padding: 0.375rem 0.75rem;
            font-size: 0.875rem;
        }
        
        .dataTables_wrapper .dataTables_paginate .paginate_button {
            border: 1px solid #dee2e6;
            border-radius: 0.375rem;
            margin: 0 2px;
            padding: 0.375rem 0.75rem;
            font-size: 0.875rem;
        }
        
        .dataTables_wrapper .dataTables_paginate .paginate_button:hover {
            background: #e9ecef;
            border-color: #adb5bd;
        }
        
        .dataTables_wrapper .dataTables_paginate .paginate_button.current {
            background: #0d6efd;
            border-color: #0d6efd;
            color: white !important;
        }
        
        .dataTables_wrapper .dataTables_paginate .paginate_button.disabled {
            color: #6c757d !important;
            cursor: not-allowed;
        }
        
        /* Responsive table styling */
        .dataTables_wrapper .dataTables_scrollBody {
            border: 1px solid #dee2e6;
        }
        
        /* Table styling */
        #mainPaymentHistoryTable {
            margin-bottom: 0;
            width: 100% !important;
        }
        
        #mainPaymentHistoryTable thead th {
            border-bottom: 2px solid #dee2e6;
            font-weight: 600;
        }
        
        #mainPaymentHistoryTable tbody tr:hover {
            background-color: #f8f9fa;
        }
        
        /* ‡∏õ‡∏¥‡∏î scroll bar ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö DataTables */
        .dataTables_wrapper .dataTables_scrollBody {
            overflow: visible !important;
            border: none !important;
        }
        
        .dataTables_wrapper .dataTables_scroll {
            overflow: visible !important;
        }
        
        /* ‡πÉ‡∏´‡πâ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÄ‡∏ï‡πá‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á */
        .dataTables_wrapper .dataTables_scrollHeadInner,
        .dataTables_wrapper .dataTables_scrollBody {
            width: 100% !important;
        }
        
        /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏° */
        #mainPaymentHistoryTable th,
        #mainPaymentHistoryTable td {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        /* ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á payment history - ‡∏õ‡∏¥‡∏î scroll bar */
        .desktop-table-container .table-responsive {
            max-height: none !important;
            overflow: visible !important;
            overflow-x: visible !important;
            overflow-y: visible !important;
        }
        
        /* ‡∏õ‡∏¥‡∏î scroll bar ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö DataTables wrapper */
        #mainPaymentHistoryTable_wrapper {
            overflow: visible !important;
        }
        
        #mainPaymentHistoryTable_wrapper .dataTables_scrollBody {
            max-height: none !important;
            overflow: visible !important;
        }
        
        .modal-backdrop.show {
            opacity: 0.3 !important; /* ‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡∏≠‡∏á backdrop */
        }
        
        /* Alternative: Remove backdrop completely */
        .modal.no-backdrop .modal-backdrop {
            display: none !important;
        }
        
        /* Modal content styling */
        .modal-content {
            border: none;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            max-height: none !important; /* ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á */
            overflow: visible !important; /* ‡∏õ‡∏¥‡∏î scroll bar */
        }
        
        .modal-header {
            border-bottom: 1px solid #e9ecef;
            background-color: #f8f9fa;
            border-radius: 12px 12px 0 0;
        }
        
        .modal-footer {
            border-top: 1px solid #e9ecef;
            background-color: #f8f9fa;
            border-radius: 0 0 12px 12px;
            color: var(--white);
        }
        
        .stats-icon.success {
            background-color: var(--success);
            color: var(--white);
        }
        
        .stats-icon.warning {
            background-color: var(--warning);
            color: var(--white);
        }
        
        .stats-icon.danger {
            background-color: var(--danger);
            color: var(--white);
        }
        
        .stats-icon.info {
            background-color: #0dcaf0;
            color: var(--white);
        }
        
        .debt-list {
            background-color: var(--white);
            border: 1px solid var(--border);
            border-radius: 8px;
            max-height: none !important; /* ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á */
            overflow: visible !important; /* ‡∏õ‡∏¥‡∏î scroll bar */
        }
        
        .debt-item {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
        }
        
        .debt-item:last-child {
            border-bottom: none;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }
        
        .content-section {
            animation: fadeIn 0.3s ease-in-out;
            max-height: none !important; /* ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á */
            overflow: visible !important; /* ‡∏õ‡∏¥‡∏î scroll bar */
        }
        
        /* Debt Details Modal Styles */
        .modal-lg {
            max-width: 800px;
        }
        
        .modal-header {
            background-color: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }
        
        .modal-title {
            color: #1e3a8a;
            font-weight: 600;
        }
        
        .modal-body {
            padding: 1.5rem;
            max-height: none !important; /* ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á */
            overflow: visible !important; /* ‡∏õ‡∏¥‡∏î scroll bar */
        }
        
        .modal-footer {
            background-color: #f8f9fa;
            border-top: 1px solid #dee2e6;
            padding: 1rem 1.5rem;
        }
        
        .modal-footer .btn {
            min-width: 80px;
            font-size: 0.875rem;
            padding: 0.375rem 0.75rem;
        }
        
        .modal-footer .btn-sm {
            min-width: 70px;
            font-size: 0.8rem;
            padding: 0.25rem 0.5rem;
        }
        
        .modal-footer .gap-2 {
            gap: 0.5rem !important;
        }
        
        .debt-details-card {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1rem;
        }
        
        .debt-details-card .card-body {
            padding: 0;
        }
        
        .debt-details-card .mb-2 {
            margin-bottom: 0.5rem !important;
        }
        
        .debt-details-card .mb-3 {
            margin-bottom: 1rem !important;
        }
        
        .text-primary {
            color: #1e3a8a !important;
        }
        
        .btn-outline-primary {
            border-color: #1e3a8a;
            color: #1e3a8a;
        }
        
        .btn-outline-primary:hover {
            background-color: #1e3a8a;
            border-color: #1e3a8a;
            color: white;
        }
        
        .btn-outline-success {
            border-color: #198754;
            color: #198754;
        }
        
        .btn-outline-success:hover {
            background-color: #198754;
            border-color: #198754;
            color: white;
        }
        
        .btn-outline-danger {
            border-color: #dc3545;
            color: #dc3545;
        }
        
        .btn-outline-danger:hover {
            background-color: #dc3545;
            border-color: #dc3545;
            color: white;
        }
        
        /* Installment Payment Modal Styles */
        .table-sm th,
        .table-sm td {
            padding: 0.5rem;
            font-size: 0.875rem;
        }
        
        .table-responsive {
            /* ‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡πÅ‡∏•‡∏∞ scroll ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î scroll bar */
            max-height: none;
            overflow: visible;
        }
        
        .form-label {
            font-weight: 600;
            color: #1e3a8a;
        }
        
        .card.bg-light {
            border: 1px solid #dee2e6;
        }
        
        .card.bg-light .card-body {
            padding: 1rem;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .card {
            border: 1px solid var(--border);
            border-radius: 8px;
        }
        
        .form-control:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
        }
        
        .hidden {
            display: none !important;
        }
        
        /* Chart styling */
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
        
        @media (max-width: 768px) {
            .chart-container {
                height: 250px;
            }
        }
        
        /* Modal styling */
        .modal-content {
            border: 1px solid var(--border);
            border-radius: 8px;
            max-height: none !important; /* ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á */
            overflow: visible !important; /* ‡∏õ‡∏¥‡∏î scroll bar */
        }
        
        .modal-header {
            background-color: var(--primary);
            color: var(--white);
            border-bottom: 1px solid var(--border);
        }
        
        .modal-header .btn-close {
            filter: invert(1);
        }
        
        /* Improve focus management for modal close buttons */
        .modal-header .btn-close:focus {
            outline: 2px solid #ffffff;
            outline-offset: 2px;
            box-shadow: 0 0 0 0.2rem rgba(255, 255, 255, 0.25);
        }
        
        .modal-footer {
            border-top: 1px solid var(--border);
        }
        
        /* Calculation summary styling */
        #calculationSummary {
            min-height: 120px;
            font-size: 0.875rem;
        }
        
        /* Modal dialog ‡πÅ‡∏•‡∏∞ modal fade - ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á */
        .modal-dialog {
            max-height: none !important;
            overflow: visible !important;
        }
        
        .modal.fade .modal-dialog {
            max-height: none !important;
            overflow: visible !important;
        }
        
        /* ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö addDebtModal */
        #addDebtModal .modal-content,
        #addDebtModal .modal-body,
        #addDebtModal .modal-dialog {
            max-height: none !important;
            overflow: visible !important;
        }
        
        /* ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡∏µ‡πâ - ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á */
        #debts-content,
        #debts-content .debt-list,
        #debts-content .desktop-table-container,
        #debts-content .mobile-card-container,
        #allDebtsList,
        #mobileDebtsList {
            max-height: none !important;
            overflow: visible !important;
        }
        
        /* Responsive design ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á payment history */
        @media (max-width: 768px) {
            /* ‡∏ã‡πà‡∏≠‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á desktop ‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
            .desktop-table-container {
                display: none !important;
            }
            
            /* ‡πÅ‡∏™‡∏î‡∏á mobile card container ‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
            .mobile-card-container {
                display: block !important;
            }
        }
        
        @media (min-width: 769px) {
            /* ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á desktop ‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÉ‡∏´‡∏ç‡πà */
            .desktop-table-container {
                display: block !important;
            }
            
            /* ‡∏ã‡πà‡∏≠‡∏ô mobile card container ‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÉ‡∏´‡∏ç‡πà */
            .mobile-card-container {
                display: none !important;
            }
        }
        
        /* Mobile card styling */
        .payment-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            margin-bottom: 1rem;
            padding: 1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .payment-card-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 0.75rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #e9ecef;
        }
        
        .payment-date {
            font-weight: 600;
            color: #1e3a8a;
        }
        
        .payment-amount {
            font-size: 1.1rem;
            font-weight: 700;
            color: #28a745;
        }
        
        .payment-details {
            margin-bottom: 0.75rem;
        }
        
        .payment-detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.25rem;
            font-size: 0.9rem;
        }
        
        .payment-detail-label {
            color: #6c757d;
            font-weight: 500;
        }
        
        .payment-detail-value {
            color: #212529;
        }
        
        .payment-actions {
            display: flex;
            gap: 0.5rem;
            justify-content: flex-end;
        }
        
        /* Mobile Navigation Menu Styling */
        .mobile-nav-content {
            background-color: white !important;
            border: 1px solid #dee2e6;
            border-radius: 0 0 8px 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        /* Ensure mobile menu closes properly */
        .mobile-menu-open {
            overflow: hidden;
        }
        
        #mobileNavMenu.collapse:not(.show) {
            display: none !important;
        }
        
        #mobileNavMenu.collapse.show {
            display: block !important;
        }
        
        /* Force hide mobile menu when not showing */
        #mobileNavMenu.collapse {
            display: none !important;
        }
        
        #mobileNavMenu.collapse.show {
            display: block !important;
        }
        
        /* Additional force hide for mobile menu */
        #mobileNavMenu[style*="display: none"] {
            display: none !important;
        }
        
        .mobile-nav-content .nav-link {
            color: #212529 !important;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #f8f9fa;
        }
        
        .mobile-nav-content .nav-link:hover {
            background-color: #f8f9fa !important;
            color: #0d6efd !important;
        }
        
        .mobile-nav-content .nav-link.active {
            background-color: #e7f3ff !important;
            color: #0d6efd !important;
            font-weight: 600;
            border-left: 4px solid #0d6efd;
            position: relative;
        }
        
        .mobile-nav-content .nav-link.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background-color: #0d6efd;
        }
        
        .mobile-nav-content .nav-link i {
            color: #6c757d;
        }
        
        .mobile-nav-content .nav-link:hover i,
        .mobile-nav-content .nav-link.active i {
            color: #0d6efd;
        }
        
        .mobile-nav-content .text-white-50 {
            color: #6c757d !important;
        }
        
        .mobile-nav-content .text-white {
            color: #212529 !important;
        }
        
        .mobile-nav-content .text-danger {
            color: #dc3545 !important;
        }
        
        .mobile-nav-content .text-danger:hover {
            background-color: #f8d7da !important;
        }
        
        #calculationSummary .small {
            line-height: 1.4;
        }
        
        .text-info {
            color: #0dcaf0 !important;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="dashboard-header">
        <div class="container-fluid">
            <div class="row align-items-center">
                <!-- Logo/Brand Section -->
                <div class="col-6 col-lg-3">
                    <div class="d-flex align-items-center">
                        <div class="brand-logo me-3">
                            <i class="fas fa-hand-holding-usd fa-lg"></i>
                        </div>
                        <div class="brand-text">
                            <h1 class="h5 mb-0 text-white fw-bold">
                                <span class="d-none d-lg-inline">‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡∏µ‡πâ</span>
                                <span class="d-lg-none">‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î</span>
                            </h1>
                            <small class="text-white-50 d-none d-lg-block">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡∏µ‡πâ‡∏™‡∏¥‡∏ô</small>
                        </div>
                    </div>
                </div>
                
                <!-- Desktop Navigation -->
                <div class="col-lg-6 d-none d-lg-block">
                    <nav class="nav justify-content-center">
                        <a class="nav-link active" href="#dashboard" data-event-bound="true">
                            <i class="fas fa-tachometer-alt me-2"></i>
                            ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î
                        </a>
                        <a class="nav-link" href="#debts" data-event-bound="true">
                            <i class="fas fa-list me-2"></i>
                            ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡∏µ‡πâ
                        </a>
                        <a class="nav-link" href="#payment-history" data-event-bound="true">
                            <i class="fas fa-history me-2"></i>
                            ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞
                        </a>
                        <a class="nav-link" href="#reports" data-event-bound="true">
                            <i class="fas fa-chart-bar me-2"></i>
                            ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
                        </a>
                        <a class="nav-link" href="#settings" data-event-bound="true">
                            <i class="fas fa-cog me-2"></i>
                            ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
                        </a>
                    </nav>
                </div>
                
                <!-- User Info & Mobile Menu Button -->
                <div class="col-6 col-lg-3">
                    <div class="d-flex align-items-center justify-content-end">
                        <!-- User Info (Desktop) -->
                        <div class="user-info d-none d-lg-flex align-items-center me-3">
                            <div class="user-avatar me-2">
                                <i class="fas fa-user-circle fa-lg"></i>
                            </div>
                            <div class="user-details">
                                <div class="text-white fw-semibold" id="creditorUserName">‡πÄ‡∏Å‡πà‡∏á‡∏Å‡∏≤‡∏à</div>
                                <small class="text-white-50">‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡∏µ‡πâ</small>
                            </div>
                        </div>
                        
                        <!-- Logout Button (Desktop) -->
                        <button class="btn btn-outline-light btn-sm d-none d-lg-inline-flex align-items-center me-2" onclick="confirmLogout()" title="‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö">
                            <i class="fas fa-sign-out-alt me-1"></i>
                            <span>‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</span>
                        </button>
                        
                        <!-- Mobile Menu Button -->
                        <button class="btn btn-outline-light d-lg-none collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#mobileNavMenu" aria-controls="mobileNavMenu" aria-expanded="false" aria-label="‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏ô‡∏π">
                            <i class="fas fa-bars"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Mobile Navigation Menu -->
            <div class="collapse d-lg-none" id="mobileNavMenu">
                <div class="mobile-nav-content">
                    <!-- User Info Section -->
                    <div class="user-section p-3 border-bottom border-white-10">
                        <div class="d-flex align-items-center">
                            <div class="user-avatar me-3">
                                <i class="fas fa-user-circle fa-2x text-white"></i>
                            </div>
                            <div class="user-details">
                                <div class="text-white fw-semibold" id="creditorUserNameMobile">‡πÄ‡∏Å‡πà‡∏á‡∏Å‡∏≤‡∏à ‡∏°‡∏¥‡πà‡∏á‡∏°‡∏á‡∏Ñ‡∏•‡∏à‡∏≥‡∏£‡∏±‡∏™</div>
                                <small class="text-white-50">‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡∏µ‡πâ</small>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Navigation Menu -->
                    <nav class="nav flex-column p-3">
                        <a class="nav-link active" href="#dashboard" data-event-bound="true">
                            <i class="fas fa-tachometer-alt me-3"></i>
                            ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î
                        </a>
                        <a class="nav-link" href="#debts" data-event-bound="true">
                            <i class="fas fa-list me-3"></i>
                            ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡∏µ‡πâ
                        </a>
                        <a class="nav-link" href="#payment-history" data-event-bound="true">
                            <i class="fas fa-history me-3"></i>
                            ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞
                        </a>
                        <a class="nav-link" href="#reports" data-event-bound="true">
                            <i class="fas fa-chart-bar me-3"></i>
                            ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
                        </a>
                        <a class="nav-link" href="#settings" data-event-bound="true">
                            <i class="fas fa-cog me-3"></i>
                            ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
                        </a>
                        
                        <!-- Logout Button -->
                        <div class="mt-3 pt-3 border-top border-white-10">
                            <a class="nav-link text-danger" href="#" onclick="confirmLogout()" data-event-bound="true">
                                <i class="fas fa-sign-out-alt me-3"></i>
                                ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
                            </a>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </header>

    <div class="container-fluid">
        <div class="row">
            <!-- Main Content -->
            <div class="col-12 main-content">
                <!-- Dashboard Content -->
                <div id="creditor-dashboard-content" class="content-section">
                    <!-- Stats Cards -->
                    <div class="row mb-4">
                        <div class="col-md-3">
                            <div class="stats-card">
                                <div class="d-flex align-items-center">
                                    <div class="stats-icon primary me-3">
                                        <i class="fas fa-money-bill-wave"></i>
                                    </div>
                                    <div>
                                        <h3 class="h4 mb-1">‡∏ø<span id="totalDebt">0</span></h3>
                                        <p class="text-muted mb-0">‡∏¢‡∏≠‡∏î‡∏´‡∏ô‡∏µ‡πâ‡∏£‡∏ß‡∏°</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stats-card">
                                <div class="d-flex align-items-center">
                                    <div class="stats-icon success me-3">
                                        <i class="fas fa-check-circle"></i>
                                    </div>
                                    <div>
                                        <h3 class="h4 mb-1"><span id="paidDebts">0</span></h3>
                                        <p class="text-muted mb-0">‡∏´‡∏ô‡∏µ‡πâ‡∏ó‡∏µ‡πà‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stats-card">
                                <div class="d-flex align-items-center">
                                    <div class="stats-icon warning me-3">
                                        <i class="fas fa-clock"></i>
                                    </div>
                                    <div>
                                        <h3 class="h4 mb-1"><span id="pendingDebts">0</span></h3>
                                        <p class="text-muted mb-0">‡∏´‡∏ô‡∏µ‡πâ‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏ä‡∏≥‡∏£‡∏∞</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stats-card">
                                <div class="d-flex align-items-center">
                                    <div class="stats-icon danger me-3">
                                        <i class="fas fa-exclamation-triangle"></i>
                                    </div>
                                    <div>
                                        <h3 class="h4 mb-1"><span id="overdueDebts">0</span></h3>
                                        <p class="text-muted mb-0">‡∏´‡∏ô‡∏µ‡πâ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Section -->
                    <div class="row mb-4">
                        <div class="col-12 mb-3">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5 class="mb-0 h5-responsive">
                                    <i class="fas fa-chart-bar me-2"></i>
                                    ‡∏Å‡∏£‡∏≤‡∏ü‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                                </h5>
                                <div class="d-flex align-items-center gap-2">
                                    <small class="text-muted">‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥: <span id="chartAutoRefreshStatus" class="text-muted">‡∏õ‡∏¥‡∏î</span></small>
                                    <button id="chartAutoRefreshButton" class="btn btn-sm btn-outline-success" onclick="toggleChartAutoRefreshButton()">
                                        <i class="fas fa-play"></i> ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ‡∏ü‡∏¥‡∏•‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
                        <div class="col-12 mb-3">
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="mb-0">
                                        <i class="fas fa-filter me-2"></i>
                                        ‡∏ü‡∏¥‡∏•‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="row g-3">
                                        <div class="col-md-3">
                                            <label for="creditorFilterDateFrom" class="form-label">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</label>
                                            <input type="date" class="form-control form-control-sm" id="creditorFilterDateFrom" onchange="applyChartFilters()">
                                        </div>
                                        <div class="col-md-3">
                                            <label for="creditorFilterDateTo" class="form-label">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î</label>
                                            <input type="date" class="form-control form-control-sm" id="creditorFilterDateTo" onchange="applyChartFilters()">
                                        </div>
                                        <div class="col-md-3">
                                            <label for="filterStatus" class="form-label">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏´‡∏ô‡∏µ‡πâ</label>
                                            <select class="form-select form-select-sm" id="filterStatus" onchange="applyChartFilters()">
                                                <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                                                <option value="pending">‡∏£‡∏≠‡∏ä‡∏≥‡∏£‡∏∞</option>
                                                <option value="partial">‡∏ä‡∏≥‡∏£‡∏∞‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô</option>
                                                <option value="paid">‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß</option>
                                                <option value="overdue">‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î</option>
                                            </select>
                                        </div>
                                        <div class="col-md-3">
                                            <label for="filterAmountRange" class="form-label">‡∏ä‡πà‡∏ß‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</label>
                                            <select class="form-select form-select-sm" id="filterAmountRange" onchange="applyChartFilters()">
                                                <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                                                <option value="0-1000">0 - 1,000 ‡∏ö‡∏≤‡∏ó</option>
                                                <option value="1000-5000">1,000 - 5,000 ‡∏ö‡∏≤‡∏ó</option>
                                                <option value="5000-10000">5,000 - 10,000 ‡∏ö‡∏≤‡∏ó</option>
                                                <option value="10000-50000">10,000 - 50,000 ‡∏ö‡∏≤‡∏ó</option>
                                                <option value="50000+">‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 50,000 ‡∏ö‡∏≤‡∏ó</option>
                                            </select>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="filterDebtor" class="form-label">‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ</label>
                                            <select class="form-select form-select-sm" id="filterDebtor" onchange="applyChartFilters()">
                                                <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                                            </select>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="d-flex align-items-end gap-2">
                                                <button class="btn btn-sm btn-outline-primary" onclick="applyChartFilters()">
                                                    <i class="fas fa-filter me-1"></i>‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                                                </button>
                                                <button class="btn btn-sm btn-outline-secondary" onclick="clearChartFilters()">
                                                    <i class="fas fa-times me-1"></i>‡∏•‡πâ‡∏≤‡∏á‡∏ü‡∏¥‡∏•‡πÄ‡∏ï‡∏≠‡∏£‡πå
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="stats-card">
                                <div class="p-3 border-bottom d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">
                                        <i class="fas fa-chart-pie me-2"></i>
                                        ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏´‡∏ô‡∏µ‡πâ
                                    </h5>
                                    <div class="btn-group" role="group">
                                        <button class="btn btn-sm btn-outline-secondary" onclick="exportChartAsImage('status')" title="‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Å‡∏£‡∏≤‡∏ü">
                                            <i class="fas fa-image"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-secondary" onclick="exportChartData('status')" title="‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•">
                                            <i class="fas fa-file-csv"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-secondary" onclick="printChart('status')" title="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Å‡∏£‡∏≤‡∏ü">
                                            <i class="fas fa-print"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-secondary" onclick="toggleChartFullscreen('status')" title="‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ï‡πá‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠">
                                            <i class="fas fa-expand"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-secondary" onclick="refreshCharts()" title="‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏Å‡∏£‡∏≤‡∏ü">
                                            <i class="fas fa-sync-alt"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="p-3">
                                    <div class="chart-container">
                                        <canvas id="creditorDebtStatusChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="stats-card">
                                <div class="p-3 border-bottom d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">
                                        <i class="fas fa-chart-line me-2"></i>
                                        ‡∏´‡∏ô‡∏µ‡πâ‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
                                    </h5>
                                    <div class="btn-group" role="group">
                                        <button class="btn btn-sm btn-outline-secondary" onclick="exportChartAsImage('monthly')" title="‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Å‡∏£‡∏≤‡∏ü">
                                            <i class="fas fa-image"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-secondary" onclick="exportChartData('monthly')" title="‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•">
                                            <i class="fas fa-file-csv"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-secondary" onclick="printChart('monthly')" title="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Å‡∏£‡∏≤‡∏ü">
                                            <i class="fas fa-print"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-secondary" onclick="toggleChartFullscreen('monthly')" title="‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ï‡πá‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠">
                                            <i class="fas fa-expand"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-secondary" onclick="refreshCharts()" title="‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏Å‡∏£‡∏≤‡∏ü">
                                            <i class="fas fa-sync-alt"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="p-3">
                                    <div class="chart-container">
                                        <canvas id="monthlyDebtChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Debts -->
                    <div class="row">
                        <div class="col-12">
                            <div class="debt-list">
                                <div class="p-3 border-bottom">
                                    <h5 class="mb-0">
                                        <i class="fas fa-list me-2"></i>
                                        ‡∏´‡∏ô‡∏µ‡πâ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
                                    </h5>
                                </div>
                                <div id="recentDebtsList">
                                    <!-- Debt items will be loaded here -->
                                    <div class="debt-item">
                                        <div class="row align-items-center">
                                            <div class="col-md-1">
                                                <div class="user-avatar">
                                                    <i class="fas fa-user"></i>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <h6 class="mb-1">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h6>
                                                <small class="text-muted">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡∏°‡πà</small>
                                            </div>
                                            <div class="col-md-2">
                                                <span class="badge bg-secondary">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</span>
                                            </div>
                                            <div class="col-md-2 text-end">
                                                <strong>‡∏ø0</strong>
                                            </div>
                                            <div class="col-md-2 text-end">
                                                <small class="text-muted">-</small>
                                            </div>
                                            <div class="col-md-2 text-end">
                                                <button class="btn btn-sm btn-outline-primary" disabled>
                                                    <i class="fas fa-eye me-1"></i>‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>

                <!-- Debts List Content -->
                <div id="debts-content" class="content-section hidden">
                    <div class="row">
                        <div class="col-12">
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <h4><i class="fas fa-list me-2"></i>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡∏µ‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h4>
                                <button class="btn btn-primary" onclick="showAddDebtForm()">
                                    <i class="fas fa-plus me-2"></i>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                                </button>
                            </div>
                            <!-- Desktop Table View -->
                            <div class="debt-list desktop-table-container">
                                <div class="p-3 border-bottom">
                                    <div class="row align-items-center">
                                        <div class="col-md-1">
                                            <h6 class="mb-0">‡∏£‡∏´‡∏±‡∏™‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ</h6>
                                        </div>
                                        <div class="col-md-2">
                                            <h6 class="mb-0">‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ</h6>
                                        </div>
                                        <div class="col-md-2">
                                            <h6 class="mb-0">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</h6>
                                        </div>
                                        <div class="col-md-2 text-end">
                                            <h6 class="mb-0">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</h6>
                                        </div>
                                        <div class="col-md-2 text-end">
                                            <h6 class="mb-0">‡∏ß‡∏±‡∏ô‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î</h6>
                                        </div>
                                        <div class="col-md-2 text-end">
                                            <h6 class="mb-0">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á</h6>
                                        </div>
                                        <div class="col-md-1 text-end">
                                            <h6 class="mb-0">‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</h6>
                                        </div>
                                    </div>
                                </div>
                                <div id="creditorAllDebtsList">
                                    <!-- All debts will be loaded here -->
                                </div>
                            </div>
                            
                            <!-- Mobile Card View -->
                            <div class="mobile-card-container" id="mobileDebtsList">
                                <!-- Mobile debt cards will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Installment Payment Modal -->
                <div class="modal fade" id="creditorInstallmentPaymentModal" tabindex="-1" aria-labelledby="creditorInstallmentPaymentModalLabel">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="creditorInstallmentPaymentModalLabel">
                                    <i class="fas fa-credit-card me-2"></i>‡∏ä‡∏≥‡∏£‡∏∞‡∏´‡∏ô‡∏µ‡πâ‡∏á‡∏ß‡∏î
                                </h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <h6 class="text-primary mb-3">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞</h6>
                                        <div class="card bg-light">
                                            <div class="card-body">
                                                <div class="row mb-2">
                                                    <div class="col-6"><strong>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°:</strong></div>
                                                    <div class="col-6">‡∏ø87,290.366</div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-6"><strong>‡∏ú‡πà‡∏≠‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏•‡∏∞:</strong></div>
                                                    <div class="col-6">‡∏ø3465.84</div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-6"><strong>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏á‡∏ß‡∏î:</strong></div>
                                                    <div class="col-6">24 ‡∏á‡∏ß‡∏î</div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-6"><strong>‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß:</strong></div>
                                                    <div class="col-6">0 ‡∏á‡∏ß‡∏î</div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-6"><strong>‡πÄ‡∏´‡∏•‡∏∑‡∏≠:</strong></div>
                                                    <div class="col-6">24 ‡∏á‡∏ß‡∏î</div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-6"><strong>‡∏¢‡∏≠‡∏î‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠:</strong></div>
                                                    <div class="col-6">‡∏ø87290.37</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <h6 class="text-primary mb-3">‡∏ä‡∏≥‡∏£‡∏∞‡∏á‡∏ß‡∏î‡∏ô‡∏µ‡πâ</h6>
                                        <div class="mb-3">
                                            <label for="paymentAmount" class="form-label">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏≥‡∏£‡∏∞:</label>
                                            <input type="number" class="form-control" id="paymentAmount" value="3465.84" min="0" step="0.01">
                                        </div>
                                        <div class="mb-3">
                                            <label for="installmentPaymentDate" class="form-label">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏≥‡∏£‡∏∞:</label>
                                            <input type="date" class="form-control" id="installmentPaymentDate" value="2025-09-06">
                                        </div>
                                        <div class="mb-3">
                                            <label for="paymentTime" class="form-label">‡πÄ‡∏ß‡∏•‡∏≤:</label>
                                            <input type="time" class="form-control" id="paymentTime" value="23:28">
                                        </div>
                                        <div class="mb-3">
                                            <label for="paymentNote" class="form-label">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:</label>
                                            <textarea class="form-control" id="paymentNote" rows="2" placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer d-flex justify-content-end align-items-center">
                                <div class="d-flex gap-2">
                                    <button type="button" class="btn btn-primary btn-sm" onclick="recordInstallmentPayment()">
                                        <i class="fas fa-credit-card me-1"></i>‡∏ä‡∏≥‡∏£‡∏∞
                                    </button>
                                    <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">
                                        <i class="fas fa-times me-1"></i>‡∏õ‡∏¥‡∏î
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Add Debt Modal -->
                <div class="modal fade" id="addDebtModal" tabindex="-1" aria-labelledby="addDebtModalLabel">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="addDebtModalLabel">
                                    <i class="fas fa-plus me-2"></i>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                                </h5>
                                <button type="button" class="btn-close" onclick="closeAddDebtModal()" aria-label="‡∏õ‡∏¥‡∏î"></button>
                            </div>
                            <div class="modal-body">
                                <form id="addDebtForm">
                                    <!-- Debtor Search Section -->
                                    <div class="mb-4">
                                        <div class="d-flex justify-content-between align-items-center mb-3">
                                            <h6 class="mb-0">
                                                <i class="fas fa-search me-2"></i>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ‡∏ó‡∏µ‡πà‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡πâ‡∏ß
                                            </h6>
                                            <button type="button" class="btn btn-outline-secondary btn-sm" onclick="clearDebtorSearch()">
                                                <i class="fas fa-times me-1"></i>‡∏•‡πâ‡∏≤‡∏á
                                            </button>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" id="debtorSearchInput" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£">
                                                    <button type="button" class="btn btn-primary" onclick="searchRegisteredDebtors()" aria-label="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ">
                                                        <i class="fas fa-search"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Search Results -->
                                        <div id="debtorSearchResults" class="mt-3">
                                            <div class="card">
                                                <div class="card-header bg-light">
                                                    <small class="text-muted">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</small>
                                                </div>
                                                <div class="card-body p-0">
                                                    <div id="debtorSearchList" class="list-group list-group-flush">
                                                        <!-- Search results will be populated here -->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Selected Debtor Info -->
                                        <div id="selectedDebtorInfo" class="mt-3">
                                            <div class="alert alert-info">
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <div>
                                                        <strong>‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å:</strong>
                                                        <span id="selectedDebtorName"></span> - 
                                                        <span id="selectedDebtorPhone"></span>
                                                    </div>
                                                                                        <button type="button" class="btn btn-sm btn-outline-secondary" onclick="clearSelectedDebtor()" aria-label="‡∏•‡πâ‡∏≤‡∏á‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å">
                                        <i class="fas fa-times"></i>
                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <hr class="my-4">
                                    
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="debtorName" class="form-label">‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ</label>
                                                <input type="text" class="form-control" id="debtorName" required>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="debtorPhone" class="form-label">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
                                                <input type="tel" class="form-control" id="debtorPhone">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="debtAmount" class="form-label">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πâ‡∏ô</label>
                                                <input type="number" class="form-control" id="debtAmount" min="0" step="0.01" required>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="interestRate" class="form-label">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢ (% ‡∏ï‡πà‡∏≠‡∏õ‡∏µ)</label>
                                                <input type="number" class="form-control" id="interestRate" min="0" max="100" step="0.01" value="0">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="interestType" class="form-label">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢</label>
                                                <select class="form-control" id="interestType">
                                                    <option value="none">‡πÑ‡∏°‡πà‡∏Ñ‡∏¥‡∏î‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢</option>
                                                    <option value="simple">‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏Ñ‡∏á‡∏ó‡∏µ‡πà</option>
                                                    <option value="compound">‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏•‡∏î‡∏ï‡πâ‡∏ô‡∏•‡∏î‡∏î‡∏≠‡∏Å</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="installmentMonths" class="form-label">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ú‡πà‡∏≠‡∏ô‡∏ä‡∏≥‡∏£‡∏∞</label>
                                                <input type="number" class="form-control" id="installmentMonths" min="1" value="1">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="dueDate" class="form-label">‡∏ß‡∏±‡∏ô‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î</label>
                                                <input type="date" class="form-control" id="dueDate" required>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="paymentDate" class="form-label">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏≥‡∏£‡∏∞ (‡∏ó‡∏∏‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)</label>
                                                <input type="number" class="form-control" id="paymentDate" min="1" max="31" placeholder="‡πÄ‡∏ä‡πà‡∏ô 30" title="‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô (1-31)">
                                                <div class="form-text">
                                                    <small class="text-muted">
                                                        <i class="fas fa-info-circle me-1"></i>
                                                        ‡∏´‡∏≤‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏±‡πâ‡∏ô‡∏°‡∏µ‡∏ß‡∏±‡∏ô‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ ‡∏à‡∏∞‡∏ä‡∏≥‡∏£‡∏∞‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
                                                        <br><span id="paymentDateExample" class="text-primary"></span>
                                                    </small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="mb-3">
                                                <label class="form-label">‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</label>
                                                <div id="calculationSummary" class="form-control-plaintext border rounded p-2 bg-light">
                                                    <small class="text-muted">‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="debtDescription" class="form-label">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</label>
                                        <textarea class="form-control" id="debtDescription" rows="3"></textarea>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer d-flex justify-content-end align-items-center">
                                <div class="d-flex gap-2">
                                    <button type="button" class="btn btn-success btn-sm" id="addNewDebtBtn" onclick="addNewDebt()">
                                        <i class="fas fa-plus me-1"></i>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                                    </button>
                                    <button type="button" class="btn btn-primary btn-sm d-none" id="updateDebtBtn" onclick="updateExistingDebt()">
                                        <i class="fas fa-save me-1"></i>‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                                    </button>
                                    <button type="button" class="btn btn-secondary btn-sm" onclick="closeAddDebtModal()">
                                        <i class="fas fa-times me-1"></i>‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reports Content -->
                <div id="reports-content" class="content-section hidden">
                    <div class="row">
                        <div class="col-12">
                            <div class="stats-card">
                                <h4 class="mb-4"><i class="fas fa-chart-bar me-2"></i>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</h4>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="card">
                                            <div class="card-body">
                                                <h5 class="card-title">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏£‡∏∏‡∏õ</h5>
                                                <p class="card-text">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏£‡∏∏‡∏õ‡∏´‡∏ô‡∏µ‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                                                <button class="btn btn-primary" onclick="downloadSummaryReport()">
                                                    <i class="fas fa-download me-2"></i>‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="card">
                                            <div class="card-body">
                                                <h5 class="card-title">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</h5>
                                                <p class="card-text">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏´‡∏ô‡∏µ‡πâ</p>
                                                <button class="btn btn-primary" onclick="downloadDetailedReport()">
                                                    <i class="fas fa-download me-2"></i>‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Payment History Content -->
                <div id="payment-history-content" class="content-section hidden">
                    <div class="row">
                        <div class="col-12">
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <h4><i class="fas fa-history me-2"></i>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡∏´‡∏ô‡∏µ‡πâ</h4>
                                <div>
                                    <button class="btn btn-outline-primary me-2" onclick="downloadPaymentHistoryReport()">
                                        <i class="fas fa-download me-2"></i>‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
                                    </button>
                                    <button class="btn btn-primary" onclick="refreshPaymentHistory()">
                                        <i class="fas fa-sync-alt me-2"></i>‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Statistics Cards -->
                            <div class="row mb-4">
                                <div class="col-md-3">
                                    <div class="stats-card">
                                        <div class="d-flex align-items-center">
                                            <div class="stats-icon primary me-3">
                                                <i class="fas fa-money-bill-wave"></i>
                                            </div>
                                            <div>
                                                <h3 class="h4 mb-1">‡∏ø<span id="totalPayments">0</span></h3>
                                                <p class="text-muted mb-0">‡∏¢‡∏≠‡∏î‡∏ä‡∏≥‡∏£‡∏∞‡∏£‡∏ß‡∏°</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="stats-card">
                                        <div class="d-flex align-items-center">
                                            <div class="stats-icon success me-3">
                                                <i class="fas fa-calendar-check"></i>
                                            </div>
                                            <div>
                                                <h3 class="h4 mb-1"><span id="totalPaymentCount">0</span></h3>
                                                <p class="text-muted mb-0">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏ä‡∏≥‡∏£‡∏∞</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="stats-card">
                                        <div class="d-flex align-items-center">
                                            <div class="stats-icon info me-3">
                                                <i class="fas fa-users"></i>
                                            </div>
                                            <div>
                                                <h3 class="h4 mb-1"><span id="activeDebtors">0</span></h3>
                                                <p class="text-muted mb-0">‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ‡∏ó‡∏µ‡πà‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="stats-card">
                                        <div class="d-flex align-items-center">
                                            <div class="stats-icon warning me-3">
                                                <i class="fas fa-calendar-alt"></i>
                                            </div>
                                            <div>
                                                <h3 class="h4 mb-1"><span id="avgPaymentAmount">0</span></h3>
                                                <p class="text-muted mb-0">‡∏¢‡∏≠‡∏î‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Filter Section -->
                            <div class="card mb-4">
                                <div class="card-body">
                                    <h6 class="card-title mb-3">‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h6>
                                    <div class="row">
                                        <div class="col-md-3">
                                            <label for="filterDebtorPayment" class="form-label">‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ</label>
                                            <select class="form-control" id="filterDebtorPayment">
                                                <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                                            </select>
                                        </div>
                                        <div class="col-md-3">
                                            <label for="creditorFilterDateFrom" class="form-label">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</label>
                                            <input type="date" class="form-control" id="creditorPaymentFilterDateFrom">
                                        </div>
                                        <div class="col-md-3">
                                            <label for="creditorFilterDateTo" class="form-label">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î</label>
                                            <input type="date" class="form-control" id="creditorPaymentFilterDateTo">
                                        </div>
                                        <div class="col-md-3">
                                            <label for="filterAmount" class="form-label">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</label>
                                            <select class="form-control" id="filterAmount">
                                                <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                                                <option value="0-1000">0 - 1,000 ‡∏ö‡∏≤‡∏ó</option>
                                                <option value="1000-5000">1,000 - 5,000 ‡∏ö‡∏≤‡∏ó</option>
                                                <option value="5000-10000">5,000 - 10,000 ‡∏ö‡∏≤‡∏ó</option>
                                                <option value="10000+">10,000+ ‡∏ö‡∏≤‡∏ó</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-12">
                                            <button class="btn btn-primary me-2" onclick="applyPaymentHistoryFilter()">
                                                <i class="fas fa-filter me-2"></i>‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                                            </button>
                                            <button class="btn btn-outline-secondary" onclick="clearPaymentHistoryFilter()">
                                                <i class="fas fa-times me-2"></i>‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Payment History Table -->
                            <div class="card">
                                <div class="card-body">
                                    <!-- Desktop Table Container -->
                                    <div class="desktop-table-container">
                                        <div class="table-responsive">
                                            <table id="mainPaymentHistoryTable" class="table table-hover responsive-table">
                                                <thead class="table-light">
                                                    <tr>
                                                        <th>‡∏£‡∏´‡∏±‡∏™‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞</th>
                                                        <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ä‡∏≥‡∏£‡∏∞</th>
                                                        <th>‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ</th>
                                                        <th>‡∏á‡∏ß‡∏î‡∏ó‡∏µ‡πà</th>
                                                        <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</th>
                                                        <th>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</th>
                                                        <th>‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="creditorPaymentHistoryTableBody">
                                                    <!-- Payment history will be loaded here -->
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>

                                    <!-- Mobile Card Container -->
                                    <div class="mobile-card-container" id="paymentHistoryMobileCards">
                                        <!-- Mobile cards will be generated here by JavaScript -->
                                    </div>
                                    
                                    <!-- Pagination -->
                                    <div class="d-flex justify-content-between align-items-center mt-3">
                                        <div>
                                            <!-- DataTables info ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ -->
                                        </div>
                                        <nav>
                                            <ul class="pagination pagination-sm mb-0" id="paymentHistoryPagination">
                                                <!-- Pagination will be generated here -->
                                            </ul>
                                        </nav>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Content -->
                <div id="creditor-settings-content" class="content-section hidden">
                    <div class="row">
                        <div class="col-12">
                            <div class="stats-card">
                                <h4 class="mb-4"><i class="fas fa-cog me-2"></i>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</h4>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="card">
                                            <div class="card-body">
                                                <h5 class="card-title">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</h5>
                                                <div class="mb-3">
                                                    <label for="creditorDisplayName" class="form-label">‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á</label>
                                                    <input type="text" class="form-control" id="creditorDisplayName">
                                                </div>
                                                <div class="mb-3">
                                                    <label for="phoneNumber" class="form-label">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
                                                    <input type="tel" class="form-control" id="phoneNumber">
                                                </div>
                                                <button class="btn btn-primary" onclick="saveProfileSettings()">
                                                    <i class="fas fa-save me-2"></i>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    
    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.5.0/js/responsive.bootstrap5.min.js"></script>
    
    <!-- DataTables Initialization -->
    <script src="../../js/datatables-init.js?v=4.0.0"></script>
    
    <!-- Custom JS -->
    <script type="module" src="../../js/firebase-config.js?v=5.0.0"></script>
    <script type="module" src="../../js/auth.js?v=5.0.0"></script>
    <script>
        // Debug logging removed for production
        
        // Simple navigation handler for immediate functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Fix URL hash issues
            const currentHash = window.location.hash;
            if (currentHash && currentHash.includes('//')) {
                // Clean up malformed hash
                const cleanHash = currentHash.replace(/\/+/g, '/').replace(/\/$/, '');
                if (cleanHash === '#dashboard' || cleanHash === '#/dashboard') {
                    window.location.hash = '#dashboard';
                } else {
                    window.location.hash = '';
                }
            }
            
            // Setting up immediate navigation handlers
            const navLinks = document.querySelectorAll('.nav-link[data-event-bound="true"]');
            navLinks.forEach(function(link) {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Remove active class from all links
                    navLinks.forEach(l => l.classList.remove('active'));
                    
                    // Add active class to clicked link
                    this.classList.add('active');
                    
                    // Close mobile menu if open - use safe method to avoid Bootstrap conflicts
                    setTimeout(() => {
                        if (window.ResponsiveNav && window.ResponsiveNav.safeCloseMobileMenu) {
                            window.ResponsiveNav.safeCloseMobileMenu();
                        } else if (window.ResponsiveNav && window.ResponsiveNav.resetMobileMenuState) {
                            window.ResponsiveNav.resetMobileMenuState();
                        } else {
                            // Fallback: direct close method
                            const mobileNavMenu = document.getElementById('mobileNavMenu');
                            const mobileMenuButton = document.querySelector('[data-bs-target="#mobileNavMenu"]');
                            
                            if (mobileNavMenu) {
                                mobileNavMenu.classList.remove('show', 'collapsing');
                                mobileNavMenu.classList.add('collapse');
                                mobileNavMenu.style.display = 'none';
                                
                                if (mobileMenuButton) {
                                    mobileMenuButton.setAttribute('aria-expanded', 'false');
                                    mobileMenuButton.classList.add('collapsed');
                                    mobileMenuButton.innerHTML = '<i class="fas fa-bars"></i>';
                                }
                            }
                        }
                    }, 10);
                    
                    // Handle navigation
                    const href = this.getAttribute('href');
                    if (window.handleNavigation) {
                        window.handleNavigation(href);
                    } else {
                        // handleNavigation not available yet, will be handled by main script
                    }
                });
            });

            // Initialize responsive table for payment history
            initializePaymentHistoryTable();
        });

        // Initialize responsive table for payment history
        function initializePaymentHistoryTable() {
            // Initialize responsive table functionality
            if (typeof toggleTableCards === 'function') {
                toggleTableCards();
            }

            // No sample data - load real data from Firebase
            // Data will be loaded by loadPaymentHistory() function
        }

        // Function to load payment history data
        function loadPaymentHistoryData(data) {
            const tableBody = document.getElementById('paymentHistoryTableBody');
            if (!tableBody) return;

            // Clear existing data
            tableBody.innerHTML = '';

            // Add data rows
            data.forEach(payment => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><code>${payment.paymentCode || payment.debtCode || 'P25680906-0001'}</code></td>
                    <td>${payment.date}</td>
                    <td>
                        <strong>${payment.debtorName}</strong>
                        <br><small class="text-muted">${payment.debtorInfo || ''}</small>
                    </td>
                    <td>
                        <span class="badge bg-info">${payment.installment}</span>
                    </td>
                    <td>
                        <strong class="text-success">‡∏ø${payment.amount.toFixed(2)}</strong>
                    </td>
                    <td>${payment.note || payment.notes || '-'}</td>
                    <td>
                        <button class="btn btn-sm btn-outline-primary me-1" onclick="editDebt('${payment.debtId}')">
                            <i class="fas fa-edit me-1"></i>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                        </button>
                        <button class="btn btn-sm btn-outline-danger" onclick="deletePaymentRecord('${payment.debtId}', '${payment.paymentId || payment.timestamp}')">
                            <i class="fas fa-trash me-1"></i>‡∏•‡∏ö
                        </button>
                    </td>
                `;
                tableBody.appendChild(row);
            });

            // Refresh mobile cards if on mobile
            if (typeof refreshMobileCards === 'function') {
                refreshMobileCards();
            }
        }

        // Function to view debt details (for demo)
        function viewDebtDetails(debtId) {
            alert('‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏´‡∏ô‡∏µ‡πâ: ' + debtId);
        }
    </script>
    
</body>
</html>
