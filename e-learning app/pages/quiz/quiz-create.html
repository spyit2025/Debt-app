<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>สร้างข้อสอบ - E-Learning Platform</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="../../assets/css/main.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <!-- DataTables CSS -->
    <link href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <style>
        /* ป้องกันไม่ให้คอลัมน์ "การดำเนินการ" wrap */
        th:last-child,
        td:last-child {
            white-space: nowrap !important;
            width: auto !important;
            min-width: 120px !important;
        }
        
        /* สำหรับตารางที่มีคอลัมน์ "การดำเนินการ" */
        #contentTable th:last-child,
        #contentTable td:last-child,
        #quizzesTable th:last-child,
        #quizzesTable td:last-child {
            white-space: nowrap !important;
            width: auto !important;
            min-width: 120px !important;
        }
    </style>
    
    <!-- Date Formatter Utility -->
    <script src="../../assets/js/utils/date-formatter-legacy.js"></script>
</head>
<body>
    <!-- เมนูนำทาง -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="../dashboard/admin-dashboard.html">
                <i class="bi bi-mortarboard-fill me-2"></i>
                E-Learning Platform
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-label="เปิด/ปิดเมนูนำทาง">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto" id="mainMenu">
                    <li class="nav-item">
                        <a class="nav-link" href="../dashboard/instructor-dashboard.html">
                            <i class="bi-house me-1"></i>
                            หน้าหลัก
                        </a>
                    </li>
                
                    <li class="nav-item">
                        <a class="nav-link" href="../courses/manage-courses.html">
                            <i class="bi-book me-1"></i>
                            จัดการคอร์ส
                        </a>
                    </li>
                
                    <li class="nav-item">
                        <a class="nav-link active" href="quiz-create.html">
                            <i class="bi-plus-circle me-1"></i>
                            สร้างข้อสอบ
                        </a>
                    </li>
                
                    <li class="nav-item">
                        <a class="nav-link" href="../courses/student-results.html">
                            <i class="bi-graph-up me-1"></i>
                            ดูผลการเรียน
                        </a>
                    </li>
                
                    <li class="nav-item">
                        <a class="nav-link" href="../courses/profile.html">
                            <i class="bi-person me-1"></i>
                            โปรไฟล์
                        </a>
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" id="userDropdown">
                            <i class="bi bi-person-circle me-1"></i>
                            <span id="userName">ผู้สอน</span>
                        </a>
                        <ul class="dropdown-menu" id="userMenu">
                            <li>
                                <a class="dropdown-item" href="#" data-action="logout">
                                    <i class="bi-box-arrow-right me-2"></i>
                                    ออกจากระบบ
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- เนื้อหาหลัก -->
            <main class="col-12 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">สร้างข้อสอบใหม่</h1>
                </div>

                <!-- ตารางจัดการเนื้อหา -->
                <div class="card mb-4">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">
                            <i class="bi bi-link-45deg me-2"></i>
                            จัดการเนื้อหา
                        </h5>
                        <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#addContentModal">
                            <i class="bi bi-plus-circle me-1"></i>เพิ่มเนื้อหา
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover" id="contentTable">
                                <thead>
                                    <tr>
                                        <th>ชื่อเนื้อหา</th>
                                        <th>ประเภท</th>
                                        <th>ลิงก์</th>
                                        <th>คำอธิบาย</th>
                                        <th>คอร์สที่เกี่ยวข้อง</th>
                                        <th>วันที่เพิ่ม</th>
                                        <th>การดำเนินการ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- ข้อมูลเนื้อหาจะถูกโหลดโดย JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ตารางจัดการข้อสอบ -->
                <div class="card mb-4">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">
                            <i class="bi bi-table me-2"></i>
                            จัดการข้อสอบ
                        </h5>
                        <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#createQuizModal">
                            <i class="bi bi-plus-circle me-1"></i>สร้างข้อสอบใหม่
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover" id="quizzesTable">
                                <thead>
                                    <tr>
                                        <th>ชื่อข้อสอบ</th>
                                        <th>คอร์ส</th>
                                        <th>จำนวนข้อ</th>
                                        <th>เวลาจำกัด</th>
                                        <th>คะแนนผ่าน</th>
                                        <th>สถานะ</th>
                                        <th>วันที่สร้าง</th>
                                        <th>การดำเนินการ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- ข้อมูลข้อสอบจะถูกโหลดโดย JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>




            </main>
        </div>
    </div>

        <!-- Create Quiz Modal -->
    <div class="modal fade" id="createQuizModal" tabindex="-1" aria-labelledby="createQuizModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="createQuizModalLabel">
                        <i class="bi bi-plus-circle me-2"></i>สร้างข้อสอบใหม่
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="ปิด" tabindex="0"></button>
                </div>
                <form id="createQuizForm">
                    <div class="modal-body">
                        <!-- ข้อมูลพื้นฐานข้อสอบ -->
                        <div class="card mb-4">
                            <div class="card-header">
                                <h6 class="mb-0">
                                    <i class="bi bi-info-circle me-2"></i>
                                    ข้อมูลพื้นฐานข้อสอบ
                                </h6>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-8">
                                        <div class="mb-3">
                                            <label for="modalQuizTitle" class="form-label">ชื่อข้อสอบ *</label>
                                            <input type="text" class="form-control" id="modalQuizTitle" placeholder="กรุณากรอกชื่อข้อสอบ" required>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label for="modalQuizCourse" class="form-label">คอร์ส *</label>
                                            <select class="form-select" id="modalQuizCourse" required>
                                                <option value="">เลือกคอร์ส</option>
                                                <!-- ตัวเลือกคอร์สจะถูกโหลดโดย JavaScript -->
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="modalQuizDescription" class="form-label">คำอธิบาย</label>
                                            <textarea class="form-control" id="modalQuizDescription" rows="3" placeholder="กรุณากรอกคำอธิบายข้อสอบ"></textarea>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="modalQuizInstructions" class="form-label">คำแนะนำ</label>
                                            <textarea class="form-control" id="modalQuizInstructions" rows="3" placeholder="กรุณากรอกคำแนะนำสำหรับนักเรียน"></textarea>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="mb-3">
                                            <label for="modalQuizTimeLimit" class="form-label">เวลาจำกัด (นาที)</label>
                                            <input type="number" class="form-control" id="modalQuizTimeLimit" placeholder="0 = ไม่จำกัด" min="0">
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="mb-3">
                                            <label for="modalQuizAttempts" class="form-label">จำนวนครั้งที่ทำได้</label>
                                            <input type="number" class="form-control" id="modalQuizAttempts" placeholder="0 = ไม่จำกัด" min="0" value="1">
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="mb-3">
                                            <label for="modalQuizPassingScore" class="form-label">คะแนนผ่าน (%)</label>
                                            <input type="number" class="form-control" id="modalQuizPassingScore" placeholder="60" min="0" max="100" value="60">
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="mb-3">
                                            <label for="modalQuizDueDate" class="form-label">กำหนดส่ง</label>
                                            <input type="datetime-local" class="form-control" id="modalQuizDueDate">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- การตั้งค่าข้อสอบ -->
                        <div class="card mb-4">
                            <div class="card-header">
                                <h6 class="mb-0">
                                    <i class="bi bi-gear me-2"></i>
                                    การตั้งค่า
                                </h6>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="modalQuizShuffleQuestions" checked>
                                            <label class="form-check-label" for="modalQuizShuffleQuestions">
                                                สุ่มลำดับคำถาม
                                            </label>
                                        </div>
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="modalQuizShowResults" checked>
                                            <label class="form-check-label" for="modalQuizShowResults">
                                                แสดงผลคะแนนทันที
                                            </label>
                                        </div>
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="modalQuizShowCorrectAnswers" checked>
                                            <label class="form-check-label" for="modalQuizShowCorrectAnswers">
                                                แสดงคำตอบที่ถูกต้อง
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="modalQuizAllowReview" checked>
                                            <label class="form-check-label" for="modalQuizAllowReview">
                                                อนุญาตให้ดูคำตอบซ้ำ
                                            </label>
                                        </div>
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="modalQuizAutoSubmit">
                                            <label class="form-check-label" for="modalQuizAutoSubmit">
                                                ส่งข้อสอบอัตโนมัติเมื่อหมดเวลา
                                            </label>
                                        </div>
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="modalQuizIsActive" checked>
                                            <label class="form-check-label" for="modalQuizIsActive">
                                                เปิดใช้งานทันที
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ส่วนคำถาม -->
                        <div class="card mb-4">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h6 class="mb-0">
                                    <i class="bi bi-question-circle me-2"></i>
                                    คำถาม
                                </h6>
                                <div class="btn-group">
                                    <button type="button" class="btn btn-sm btn-outline-primary" id="modalAddMultipleChoiceBtn">
                                        <i class="bi bi-list-ul me-1"></i>เลือกตอบ
                                    </button>
                                    <button type="button" class="btn btn-sm btn-outline-primary" id="modalAddTrueFalseBtn">
                                        <i class="bi bi-check2-circle me-1"></i>ถูก/ผิด
                                    </button>
                                    <button type="button" class="btn btn-sm btn-outline-primary" id="modalAddFillBlankBtn">
                                        <i class="bi bi-pencil-square me-1"></i>เติมคำ
                                    </button>
                                </div>
                            </div>
                            <div class="card-body">
                                <div id="modalQuestionsContainer">
                                    <!-- คำถามจะถูกเพิ่มที่นี่ -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ยกเลิก</button>
                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-check-circle me-1"></i>สร้างข้อสอบ
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit Quiz Modal -->
    <div class="modal fade" id="editQuizModal" tabindex="-1" aria-labelledby="editQuizModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editQuizModalLabel">
                        <i class="bi bi-pencil me-2"></i>แก้ไขข้อสอบ
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="ปิด" tabindex="0"></button>
                </div>
                <form id="editQuizForm">
                    <input type="hidden" id="editQuizId">
                    <div class="modal-body">
                        <!-- ข้อมูลพื้นฐานข้อสอบ -->
                        <div class="card mb-4">
                            <div class="card-header">
                                <h6 class="mb-0">
                                    <i class="bi bi-info-circle me-2"></i>
                                    ข้อมูลพื้นฐานข้อสอบ
                                </h6>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-8">
                                        <div class="mb-3">
                                            <label for="editQuizTitle" class="form-label">ชื่อข้อสอบ *</label>
                                            <input type="text" class="form-control" id="editQuizTitle" placeholder="กรุณากรอกชื่อข้อสอบ" required>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label for="editQuizCourse" class="form-label">คอร์ส *</label>
                                            <select class="form-select" id="editQuizCourse" required>
                                                <option value="">เลือกคอร์ส</option>
                                                <!-- ตัวเลือกคอร์สจะถูกโหลดโดย JavaScript -->
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="editQuizDescription" class="form-label">คำอธิบาย</label>
                                            <textarea class="form-control" id="editQuizDescription" rows="3" placeholder="กรุณากรอกคำอธิบายข้อสอบ"></textarea>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="editQuizInstructions" class="form-label">คำแนะนำ</label>
                                            <textarea class="form-control" id="editQuizInstructions" rows="3" placeholder="กรุณากรอกคำแนะนำสำหรับนักเรียน"></textarea>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="mb-3">
                                            <label for="editQuizTimeLimit" class="form-label">เวลาจำกัด (นาที)</label>
                                            <input type="number" class="form-control" id="editQuizTimeLimit" placeholder="0 = ไม่จำกัด" min="0">
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="mb-3">
                                            <label for="editQuizAttempts" class="form-label">จำนวนครั้งที่ทำได้</label>
                                            <input type="number" class="form-control" id="editQuizAttempts" placeholder="0 = ไม่จำกัด" min="0" value="1">
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="mb-3">
                                            <label for="editQuizPassingScore" class="form-label">คะแนนผ่าน (%)</label>
                                            <input type="number" class="form-control" id="editQuizPassingScore" placeholder="60" min="0" max="100" value="60">
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="mb-3">
                                            <label for="editQuizDueDate" class="form-label">กำหนดส่ง</label>
                                            <input type="datetime-local" class="form-control" id="editQuizDueDate">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- การตั้งค่าข้อสอบ -->
                        <div class="card mb-4">
                            <div class="card-header">
                                <h6 class="mb-0">
                                    <i class="bi bi-gear me-2"></i>
                                    การตั้งค่า
                                </h6>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="editQuizShuffleQuestions">
                                            <label class="form-check-label" for="editQuizShuffleQuestions">
                                                สุ่มลำดับคำถาม
                                            </label>
                                        </div>
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="editQuizShowResults">
                                            <label class="form-check-label" for="editQuizShowResults">
                                                แสดงผลคะแนนทันที
                                            </label>
                                        </div>
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="editQuizShowCorrectAnswers">
                                            <label class="form-check-label" for="editQuizShowCorrectAnswers">
                                                แสดงคำตอบที่ถูกต้อง
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="editQuizAllowReview">
                                            <label class="form-check-label" for="editQuizAllowReview">
                                                อนุญาตให้ดูคำตอบซ้ำ
                                            </label>
                                        </div>
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="editQuizAutoSubmit">
                                            <label class="form-check-label" for="editQuizAutoSubmit">
                                                ส่งข้อสอบอัตโนมัติเมื่อหมดเวลา
                                            </label>
                                        </div>
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="editQuizIsActive">
                                            <label class="form-check-label" for="editQuizIsActive">
                                                เปิดใช้งาน
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ยกเลิก</button>
                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-check-circle me-1"></i>บันทึกการแก้ไข
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Delete Quiz Modal -->
    <div class="modal fade" id="deleteQuizModal" tabindex="-1" aria-labelledby="deleteQuizModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteQuizModalLabel">
                        <i class="bi bi-exclamation-triangle me-2 text-danger"></i>ยืนยันการลบ
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="ปิด" tabindex="0"></button>
                </div>
                <div class="modal-body">
                    <p>คุณต้องการลบข้อสอบ "<span id="deleteQuizTitle"></span>" ใช่หรือไม่?</p>
                    <p class="text-danger"><small>การดำเนินการนี้ไม่สามารถยกเลิกได้</small></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ยกเลิก</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteQuiz">
                        <i class="bi bi-trash me-1"></i>ลบข้อสอบ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Content Modal -->
    <div class="modal fade" id="addContentModal" tabindex="-1" aria-labelledby="addContentModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addContentModalLabel">
                        <i class="bi bi-plus-circle me-2"></i>เพิ่มเนื้อหา
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="ปิด" tabindex="0"></button>
                </div>
                <form id="addContentForm">
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-md-8">
                                <div class="mb-3">
                                    <label for="contentTitle" class="form-label">ชื่อเนื้อหา *</label>
                                    <input type="text" class="form-control" id="contentTitle" placeholder="กรุณากรอกชื่อเนื้อหา" required>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="contentType" class="form-label">ประเภท *</label>
                                    <select class="form-select" id="contentType" required>
                                        <option value="">เลือกประเภท</option>
                                        <option value="video">วิดีโอ (YouTube)</option>
                                        <option value="document">เอกสาร</option>
                                        <option value="link">ลิงก์เว็บไซต์</option>
                                        <option value="pdf">ไฟล์ PDF</option>
                                        <option value="image">รูปภาพ</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-8">
                                <div class="mb-3">
                                    <label for="contentUrl" class="form-label">ลิงก์/URL *</label>
                                    <input type="url" class="form-control" id="contentUrl" placeholder="https://www.youtube.com/watch?v=..." required>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="contentCourse" class="form-label">คอร์สที่เกี่ยวข้อง</label>
                                    <select class="form-select" id="contentCourse">
                                        <option value="">เลือกคอร์ส (ไม่บังคับ)</option>
                                        <!-- ตัวเลือกคอร์สจะถูกโหลดโดย JavaScript -->
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="contentDescription" class="form-label">คำอธิบาย</label>
                            <textarea class="form-control" id="contentDescription" rows="3" placeholder="กรุณากรอกคำอธิบายเนื้อหา"></textarea>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="contentDuration" class="form-label">ระยะเวลา (นาที)</label>
                                    <input type="number" class="form-control" id="contentDuration" placeholder="0" min="0">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="contentDifficulty" class="form-label">ระดับความยาก</label>
                                    <select class="form-select" id="contentDifficulty">
                                        <option value="beginner">เริ่มต้น</option>
                                        <option value="intermediate" selected>ปานกลาง</option>
                                        <option value="advanced">ขั้นสูง</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="contentIsRequired" checked>
                            <label class="form-check-label" for="contentIsRequired">
                                เนื้อหาที่ต้องศึกษา (แนะนำให้ผู้เรียนดูก่อนทำข้อสอบ)
                            </label>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ยกเลิก</button>
                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-check-circle me-1"></i>เพิ่มเนื้อหา
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit Content Modal -->
    <div class="modal fade" id="editContentModal" tabindex="-1" aria-labelledby="editContentModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editContentModalLabel">
                        <i class="bi bi-pencil me-2"></i>แก้ไขเนื้อหา
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="ปิด" tabindex="0"></button>
                </div>
                <form id="editContentForm">
                    <input type="hidden" id="editContentId">
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-md-8">
                                <div class="mb-3">
                                    <label for="editContentTitle" class="form-label">ชื่อเนื้อหา *</label>
                                    <input type="text" class="form-control" id="editContentTitle" placeholder="กรุณากรอกชื่อเนื้อหา" required>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="editContentType" class="form-label">ประเภท *</label>
                                    <select class="form-select" id="editContentType" required>
                                        <option value="">เลือกประเภท</option>
                                        <option value="video">วิดีโอ (YouTube)</option>
                                        <option value="document">เอกสาร</option>
                                        <option value="link">ลิงก์เว็บไซต์</option>
                                        <option value="pdf">ไฟล์ PDF</option>
                                        <option value="image">รูปภาพ</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-8">
                                <div class="mb-3">
                                    <label for="editContentUrl" class="form-label">ลิงก์/URL *</label>
                                    <input type="url" class="form-control" id="editContentUrl" placeholder="https://www.youtube.com/watch?v=..." required>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="editContentCourse" class="form-label">คอร์สที่เกี่ยวข้อง</label>
                                    <select class="form-select" id="editContentCourse">
                                        <option value="">เลือกคอร์ส (ไม่บังคับ)</option>
                                        <!-- ตัวเลือกคอร์สจะถูกโหลดโดย JavaScript -->
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="editContentDescription" class="form-label">คำอธิบาย</label>
                            <textarea class="form-control" id="editContentDescription" rows="3" placeholder="กรุณากรอกคำอธิบายเนื้อหา"></textarea>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editContentDuration" class="form-label">ระยะเวลา (นาที)</label>
                                    <input type="number" class="form-control" id="editContentDuration" placeholder="0" min="0">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editContentDifficulty" class="form-label">ระดับความยาก</label>
                                    <select class="form-select" id="editContentDifficulty">
                                        <option value="beginner">เริ่มต้น</option>
                                        <option value="intermediate">ปานกลาง</option>
                                        <option value="advanced">ขั้นสูง</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="editContentIsRequired" checked>
                            <label class="form-check-label" for="editContentIsRequired">
                                เนื้อหาที่ต้องศึกษา (แนะนำให้ผู้เรียนดูก่อนทำข้อสอบ)
                            </label>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ยกเลิก</button>
                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-check-circle me-1"></i>บันทึกการแก้ไข
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Delete Content Modal -->
    <div class="modal fade" id="deleteContentModal" tabindex="-1" aria-labelledby="deleteContentModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteContentModalLabel">
                        <i class="bi bi-exclamation-triangle me-2 text-danger"></i>ยืนยันการลบ
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="ปิด" tabindex="0"></button>
                </div>
                <div class="modal-body">
                    <p>คุณต้องการลบเนื้อหา "<span id="deleteContentTitle"></span>" ใช่หรือไม่?</p>
                    <p class="text-danger"><small>การดำเนินการนี้ไม่สามารถยกเลิกได้</small></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ยกเลิก</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteContent">
                        <i class="bi bi-trash me-1"></i>ลบเนื้อหา
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- เทมเพลตคำถาม (ซ่อนไว้) -->
    <template id="multipleChoiceTemplate">
        <div class="question-item card mb-3" data-question-type="multiple-choice">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h6 class="mb-0">คำถามแบบเลือกตอบ</h6>
                <button type="button" class="btn btn-sm btn-outline-danger remove-question">
                    <i class="bi bi-trash"></i>
                </button>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label class="form-label">คำถาม *</label>
                    <textarea class="form-control question-text" rows="2" placeholder="กรุณากรอกคำถาม" required></textarea>
                </div>
                <div class="mb-3">
                    <label class="form-label">ตัวเลือก</label>
                    <div class="options-container">
                        <div class="input-group mb-2">
                            <div class="input-group-text">
                                <input class="form-check-input mt-0 correct-answer" type="radio" name="correct" value="0">
                            </div>
                            <input type="text" class="form-control option-text" placeholder="ตัวเลือกที่ 1" required>
                            <button type="button" class="btn btn-outline-danger remove-option">
                                <i class="bi bi-x"></i>
                            </button>
                        </div>
                        <div class="input-group mb-2">
                            <div class="input-group-text">
                                <input class="form-check-input mt-0 correct-answer" type="radio" name="correct" value="1">
                            </div>
                            <input type="text" class="form-control option-text" placeholder="ตัวเลือกที่ 2" required>
                            <button type="button" class="btn btn-outline-danger remove-option">
                                <i class="bi bi-x"></i>
                            </button>
                        </div>
                    </div>
                    <button type="button" class="btn btn-sm btn-outline-primary add-option">
                        <i class="bi bi-plus me-1"></i>เพิ่มตัวเลือก
                    </button>
                </div>
                <div class="mb-3">
                    <label class="form-label">คำอธิบายเฉลย</label>
                    <textarea class="form-control explanation" rows="2" placeholder="คำอธิบายเฉลย (ไม่บังคับ)"></textarea>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <label class="form-label">คะแนน</label>
                        <input type="number" class="form-control question-score" value="1" min="0" step="0.5">
                    </div>
                </div>
            </div>
        </div>
    </template>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <!-- JavaScript Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- DataTables -->
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap5.min.js"></script>
    <!-- Firebase -->
    <script type="module" src="../../assets/js/firebase-config.js"></script>
    <script type="module" src="../../assets/js/auth.js"></script>
    <script type="module" src="../../assets/js/quiz-create.js"></script>
</body>
</html>
