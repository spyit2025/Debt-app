<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
    <meta name="description" content="‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡∏µ‡πâ‡∏™‡∏¥‡∏ô‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏£‡∏ö‡∏ß‡∏á‡∏à‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡∏∞‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ">
    <meta name="keywords" content="‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡∏µ‡πâ, ‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏ô‡∏µ‡πâ, ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡∏µ‡πâ, ‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ">
    <meta name="author" content="Debt Management System">
    
    <!-- Security Headers -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https: data: 'unsafe-inline' 'unsafe-eval'; img-src 'self' data: https:; font-src 'self' https: data:;">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=(), display-capture=()">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#2563eb" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#1e3a8a" media="(prefers-color-scheme: dark)">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡∏µ‡πâ">
    <meta name="msapplication-TileColor" content="#2563eb">
    <meta name="msapplication-config" content="/browserconfig.xml">
    
    <!-- Apple Touch Icon - Single optimized version -->
    <link rel="apple-touch-icon" sizes="180x180" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üí∞</text></svg>">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="css/style.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    
    <!-- Fallback for browsers that don't support preload onload -->
    <noscript>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;500;600;700&display=swap">
        <link rel="stylesheet" href="css/style.css">
    </noscript>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üí∞</text></svg>">
    <link rel="shortcut icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üí∞</text></svg>">
    
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡∏µ‡πâ - ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/login.css?v=2.2.0">
    <link rel="stylesheet" href="css/performance.css?v=2.2.0">
    <link rel="stylesheet" href="css/responsive-nav.css?v=2.2.0">
    <link rel="stylesheet" href="css/mobile-chrome-fix.css?v=2.2.0">
    
    <!-- Mobile Console (Eruda) -->
    <script src="https://cdn.jsdelivr.net/npm/eruda@3.0.1/eruda.min.js"></script>
    <script>
        // ‡πÄ‡∏õ‡∏¥‡∏î Eruda Console ‡πÉ‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠
        if (window.innerWidth <= 768) {
            eruda.init();
        }
    </script>
</head>
<body>
    <!-- Simple Header for Login Page -->
    <nav class="navbar navbar-expand-lg navbar-custom login-navbar fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <i class="fas fa-chart-line me-2"></i>
                ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡∏µ‡πâ
            </a>
            
            <!-- Only show navigation menu on dashboard pages, not on login page -->
            <div class="d-none" id="dashboardNav">
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link active" href="#dashboard" data-event-bound="true">
                                <i class="fas fa-tachometer-alt me-2"></i>
                                ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#debts" data-event-bound="true">
                                <i class="fas fa-list me-2"></i>
                                ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡∏µ‡πâ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#payment-history" data-event-bound="true">
                                <i class="fas fa-history me-2"></i>
                                ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#reports" data-event-bound="true">
                                <i class="fas fa-chart-bar me-2"></i>
                                ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#settings" data-event-bound="true">
                                <i class="fas fa-cog me-2"></i>
                                ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="confirmLogout()" data-event-bound="true">
                                <i class="fas fa-sign-out-alt me-2"></i>
                                ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row min-vh-100">
            <!-- ‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢ - ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á -->
            <div class="col-lg-6 d-none d-lg-block bg-primary-gradient">
                <div class="d-flex align-items-center justify-content-center h-100">
                    <div class="text-center text-white">
                        <i class="fas fa-chart-line fa-5x mb-4"></i>
                        <h1 class="display-4 fw-bold mb-3">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡∏µ‡πâ</h1>
                        <p class="lead">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡∏µ‡πâ‡∏™‡∏¥‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏ö‡∏ö ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û</p>
                        <div class="row mt-5">
                            <div class="col-md-6">
                                <div class="feature-item">
                                    <i class="fas fa-shield-alt fa-2x mb-3"></i>
                                    <h5>‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢</h5>
                                    <p>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏î‡∏µ</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="feature-item">
                                    <i class="fas fa-mobile-alt fa-2x mb-3"></i>
                                    <h5>‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢</h5>
                                    <p>‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤ - ‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö -->
            <div class="col-lg-6 d-flex align-items-center justify-content-center">
                <div class="login-container w-100 px-4">
                    <div class="text-center mb-4">
                        <h2 class="fw-bold text-primary">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h2>
                        <p class="text-muted">‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</p>
                    </div>
                    
                    <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö -->
                    <form id="loginForm" class="needs-validation" novalidate>
                        <div class="mb-3">
                            <label for="email" class="form-label">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
                            <div class="input-group">
                                <span class="input-group-text">
                                    <i class="fas fa-envelope"></i>
                                </span>
                                <input type="email" class="form-control" id="email" required>
                                <div class="invalid-feedback">
                                    ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="password" class="form-label">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                            <div class="input-group">
                                <span class="input-group-text">
                                    <i class="fas fa-lock"></i>
                                </span>
                                <input type="password" class="form-control" id="password" required>
                                <button class="btn btn-outline-secondary" type="button" id="togglePassword" aria-label="‡πÅ‡∏™‡∏î‡∏á/‡∏ã‡πà‡∏≠‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <div class="invalid-feedback">
                                    ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="rememberMe">
                            <label class="form-check-label" for="rememberMe">
                                ‡∏à‡∏î‡∏à‡∏≥‡∏â‡∏±‡∏ô
                            </label>
                        </div>
                        
                        <button type="submit" class="btn btn-primary w-100 py-2 mb-3">
                            <i class="fas fa-sign-in-alt me-2"></i>
                            ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
                        </button>
                        
                        <div class="text-center">
                            <a href="#" class="text-decoration-none">‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô?</a>
                        </div>
                    </form>
                    
                    <hr class="my-4">
                    
                    <div class="text-center">
                        <p class="text-muted">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ? 
                            <a href="pages/auth/register.html" class="text-decoration-none fw-bold">‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" defer></script>
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-analytics-compat.js" defer></script>
    
    <!-- Custom JS -->
    <script src="js/performance.js?v=2.2.0" defer></script>
    <script src="js/error-handler.js?v=2.2.0" defer></script>
    <script src="js/logger.js?v=2.2.0" defer></script>
    <script src="js/firebase-config.js?v=2.2.0" defer></script>
    <script src="js/firebase-utils.js?v=2.2.0" defer></script>
    <script src="js/security-utils.js?v=2.2.0" defer></script>
    <script src="js/auth.js?v=2.2.0" defer></script>
    <script src="js/login.js?v=2.2.0" defer></script>
    <script src="js/responsive-nav.js?v=2.2.0" defer></script>
    
    <!-- Login Page Specific JS -->
    <script>
        // Hide navigation menu on login page
        document.addEventListener('DOMContentLoaded', function() {
            const dashboardNav = document.getElementById('dashboardNav');
            if (dashboardNav) {
                dashboardNav.classList.add('d-none');
            }
            
            // Add login page specific styling
            document.body.classList.add('login-page');
        });
    </script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // Try different paths for Service Worker registration
                const swPaths = [
                    '/sw.js',
                    './sw.js',
                    'sw.js'
                ];
                
                let registrationAttempted = false;
                
                const tryRegisterSW = (pathIndex = 0) => {
                    if (pathIndex >= swPaths.length) {
                        console.warn('Service Worker registration failed: All paths attempted');
                        return;
                    }
                    
                    const swPath = swPaths[pathIndex];
                    console.log(`Attempting to register Service Worker from: ${swPath}`);
                    
                    navigator.serviceWorker.register(swPath)
                        .then(registration => {
                            console.log('Service Worker registered successfully:', registration);
                            console.log('Service Worker scope:', registration.scope);
                        })
                        .catch(error => {
                            console.warn(`Service Worker registration failed for ${swPath}:`, error);
                            
                            // Try next path if available
                            if (pathIndex + 1 < swPaths.length) {
                                console.log('Trying next path...');
                                tryRegisterSW(pathIndex + 1);
                            } else {
                                console.error('Service Worker registration failed: All paths exhausted');
                                console.log('This is normal if the app is not deployed or sw.js is not available');
                            }
                        });
                };
                
                // Start registration attempts
                tryRegisterSW();
            });
        } else {
            console.log('Service Worker not supported in this browser');
        }
    </script>
</body>
</html>
